server {
	listen 80;
	listen [::]:80;

	server_name ptero.self-hosted.lol;


	location ~ {
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto $scheme;
		add_header Front-End-Https on;

		proxy_headers_hash_max_size 512;
		proxy_headers_hash_bucket_size 64;

		proxy_buffering off;
		proxy_redirect off;
		proxy_max_temp_file_size 0;
		proxy_pass http://127.0.0.1:4000;
	}
}

server 
{
	server_name dl.falling-from.space;
	
	listen 80;

	root /var/www/html ;

	location ~ \.php$
	{	
		include snippets/fastcgi-php.conf;
		fastcgi_pass unix:/run/php/php7.4-fpm.sock;
	}

}

server{
	server_name maquette.falling-from.space;

	listen 80;

	location ~ {
		proxy_pass http://127.0.0.1:8030;
	}
}

server{
	server_name hergo.falling-from.space;

	listen 80;

	root /data/cyril/upload;

	add_header Last-Modified $date_gmt;
        add_header Cache-Control 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';
        if_modified_since off;
        expires off;
        etag off;

	proxy_no_cache 1;
    # even if cached, don't try to use it
	proxy_cache_bypass 1; 
}

server 
{
    server_name cloud.self-hosted.lol;

    client_max_body_size 50000M;
    underscores_in_headers on;

    location ~ {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        add_header Front-End-Https on;

        proxy_headers_hash_max_size 512;
        proxy_headers_hash_bucket_size 64;

        proxy_buffering off;
        proxy_redirect off;
        proxy_max_temp_file_size 0;
        proxy_pass http://127.0.0.1:8080;
    }
}

server 
{
	listen 80;
	listen [::]:80;

	server_name someboringnerd.xyz;

	location ~ {
		proxy_pass http://127.0.0.1:1234;
	}
}

server 
{
	listen 80;
	listen [::]:80;

	server_name falling-from.space pics.self-hosted.lol;	

	client_max_body_size 200M;
	
	location ~
	{
		proxy_pass http://localhost:8069;
	}
}

